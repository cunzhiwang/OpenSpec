## 为什么

我们需要一种更快、更可靠的方式来手动验证 CLI 行为变更，如配置文件/交付同步、迁移行为和工具检测用户体验。

今天，手动审查大多是临时的：每个开发者设置的状态不同，运行不同的命令顺序，并非正式地检查输出。这使得回归很容易遗漏，并减慢了 CLI 用户体验工作的迭代速度。

一个 80/20 解决方案是为确定性非交互流程添加轻量级冒烟工具，加上一个简短的交互式提示行为手动检查清单。

## 变更内容

- 为 OpenSpec CLI 行为添加轻量级 QA 冒烟工具，每次运行使用隔离的沙箱状态
- 使用 `Makefile` 目标作为主要入口点：
  - `make qa`（默认本地 QA 入口点）
  - `make qa-smoke`（确定性非交互套件）
  - `make qa-interactive`（打印/打开手动交互式检查清单）
- 在脚本中实现冒烟逻辑（由 Make 目标调用），而不是在 Make 本身中
- 确保每个场景在隔离的沙箱中运行，使用临时的 `HOME`、`XDG_CONFIG_HOME`、`XDG_DATA_HOME` 和 `CODEX_HOME`
- 捕获场景产物以供检查（命令输出、退出代码和前后文件系统状态）
- 为高风险行为添加聚焦场景集：
  - init 核心输出生成
  - 非交互检测工具行为
  - 配置文件未设置时的迁移
  - 交付清理（`both -> skills`、`both -> commands`）
  - 仅命令更新检测
  - 新工具目录检测消息
  - 无效配置文件覆盖验证
- 添加简短的交互式检查清单用于按键/提示用户体验验证（空格切换、回车确认、检测到的预选择）
- 将 CI 配置为在 Linux 上运行冒烟套件作为快速回归门控

## 能力

### 新能力

- `qa-smoke-harness`：具有单一开发者入口点的确定性、沙箱化 CLI 冒烟验证

### 修改的能力

- `developer-qa-workflow`：CLI 行为和迁移敏感场景的标准化本地/CI QA 流程

## 影响

- `Makefile` - 添加 `qa`、`qa-smoke` 和 `qa-interactive` 目标
- `scripts/qa-smoke.sh`（或等效）- 实现沙箱设置、场景执行和断言
- `docs/` - 添加/更新面向贡献者的 QA 说明和交互式检查清单使用方法
- CI 工作流 - 添加冒烟目标执行作为轻量级回归门控
