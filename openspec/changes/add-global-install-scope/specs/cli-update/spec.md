## 新增需求

### 需求：Update 安装范围选择
update 命令应支持为同步操作选择安装范围。

#### 场景：范围默认为全局配置值
- **当** 用户运行 `openspec update` 而没有显式范围覆盖
- **则** update 应使用配置的安装范围
- **且** 如果未设置，应解析迁移感知默认值（新创建配置为 `global`，遗留模式演进配置为 `project`）

#### 场景：通过标志覆盖范围
- **当** 用户运行 `openspec update --scope project`
- **则** update 应使用 `project` 作为该运行的首选范围

### 需求：范围感知同步和漂移检测
update 命令应使用有效范围路径评估配置状态和漂移。

#### 场景：范围漂移检测
- **当** update 评估工具是否最新时
- **则** 它应检查每个工具/表面的有效范围目标的文件
- **且** 应将当前解析的范围与每个工具/表面的最后成功有效范围进行比较
- **且** 应将差异视为需要同步的漂移

#### 场景：更新期间的范围回退
- **当** 配置的工具/表面不支持首选范围
- **且** 支持备用范围
- **则** update 应应用回退范围解析
- **且** 应在输出中报告回退

#### 场景：更新期间不支持的范围
- **当** 配置的工具/表面既不支持首选也不支持备用范围
- **则** 应在任何写入前验证所有配置的工具/表面的范围支持
- **且** 当检测到不兼容时 update 应失败而不执行文件写入
- **且** 应报告不兼容的工具和补救步骤
